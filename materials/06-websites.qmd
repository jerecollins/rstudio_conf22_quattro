---
format: 
  revealjs:
    scrollable: false
    slide-number: true
    width: 1920
    height: 1080
    logo: "https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-Flat.png"
    footer: "[Get started with Quarto](https://rstudio-conf-2022.github.io/get-started-quarto/)"
    css: ["theme/theme.css"]
    theme: simple
    echo: true
editor: source
editor_options:
  markdown:
    canonical: true
---

# 06 - Websites {background-image="images/website.png" background-size="cover" background-color="black" style="font-size: 120px"}

<h2>Building with Quarto</h2>

## Websites

-   Websites are essentially `format: html` + a Quarto Project

. . .

-   Website is different than `format: html` in that it has *multiple pages*
-   Website is our first exploration into Quarto Projects

. . .

-   Website/book are very similar in that they associate multiple pages/resources into a connected resource

## Why not WordPress, Tumblr, Medium.com, Blogger.com, etc?[^1]

[^1]: From Yihui: <https://slides.yihui.name/2017-rmarkdown-UNL-Yihui-Xie.html#36>

-   No R Markdown support (even math support is often nonexistent or awkward)

-   Huge benefits of static websites compared to dynamic websites

-   all static files, no PHP or databases, no login/password, work everywhere (even offline)

-   typically fast to visit (no computation needed on the server side), and easy to speed up via CDN

## 

### Create a website

``` bash
quarto create-project MySiteName --type website
```

. . .

### Create a blog

``` bash
quarto create-project MyBlogName --type website:blog
```

. . .

RStudio \> New Project \> New Quarto Blog

<img src="images/quarto-blog.png" width="800px"/>

## Creating a blog

    $ quarto create-project MyBlogName --type website:blog

    Creating project at myblog:
      - Created _quarto.yml
      - Created index.qmd
      - Created posts/welcome/index.qmd
      - Created posts/post-with-code/index.qmd
      - Created about.qmd
      - Created styles.css
      - Created posts/_metadata.yml

## Navigation & Structure

| File                  | Description                |
|:----------------------|:---------------------------|
| `_quarto.yml`         | Quarto project file.       |
| `index.qmd`           | Blog home page.            |
| `about.qmd`           | Blog about page.           |
| `posts/`              | Directory containing posts |
| `posts/_metadata.yml` | Shared options for `posts` |
| `styles.css`          | Custom CSS for website     |

## Create a blog

-   A blog is a website with specific "opinions" already made
-   Includes a listing automatically from `posts` directory
-   Can build custom listings in several ways

## 

<iframe src="https://themockup.blog" height="800" width="1200">

</iframe>

## Core blog workflow

-   Create a new folder under `/posts` - this folder will be the "slug" URL (like `themockup.blog/2022-07-25-new-post/`)
-   Create a new `index.qmd` within the new folder

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

-   Create a new RStudio project (in a separate RStudio session) and select Quarto blog
-   Give it a name
-   Explore the directory

## Rendering posts

-   On a specific post, Render with RStudio \> Render
-   Build tab \> Render/Preview Website

These will preview the entire website

. . .

-   Render with `quarto render` on a specific post - this will just render that specific post

. . .

When you render the website, it will re-execute code in older posts. Not ideal in many situations!

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

-   Let's render the `index.qmd` together!
-   Now, let's try Build \> Render Website

## Freeze

> You can use the freeze option to denote that computational documents should never be re-rendered during a global project render, or alternatively only be re-rendered when their source file changes

. . .

``` yaml
execute:
  freeze: true  # never re-render during project render
```

``` yaml
execute:
  freeze: auto  # re-render only when source changes
```

. . .

`freeze: true` is typically added to a `_metadata.yml` file within a specific directory, affecting all files in that directory.

In the case of a blog - the `_metadata.yml` is saved at the root of the `posts` directory. You can have it only within specific subdirectories for more complex sites.

## Cache

Cache on the other hand, stores the results of computations for a specific file.

> Note that cache invalidation is triggered by changes in chunk source code (or other cache attributes you've defined).

``` yaml
execute:
  cache: true
```

. . .

I typically use cache throughout various types of outputs when I have computationally expensive chunks. Think a `tidymodels` workshop with grid-tuning.

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

-   Add a `_metadata.yml` to the `/posts/` directory
-   Add the freeze code to `_metadata.yml`

<!-- -->

    execute:
      freeze: true

-   Render `index.qmd` and note the items that are built
-   Explore the `_freeze` directory

. . .

-   Marvel at the "beautiful" JSON - it's not for you, it's for the machine

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

-   Create a new folder in `/posts/` - title it `2022-07-26-my-first-post`
-   Create a new blank `index.qmd` in that folder, add a `format: html` YAML header
-   Add some text and a markdown image: `![]()`, along with maybe some code :laptop:
-   Render it!

## Adding an About page

    ---yaml
    twitter-card:
      image: images/profile-preview.png
      creator: "@thomas_mock"
    open-graph: true
    title: "Tom Mock"
    image: images/profile-preview.png
    about:
      template: trestles
      links:
        - icon: twitter
          text: Twitter
          href: https://twitter.com/thomasmock
        - icon: github
          text: Github
          href: https://github.com/jthomasmock
    ---

## About page templates

``` yaml
about:
  template: trestles
```

::: panel-tabset
## jolla

![](https://quarto.org/docs/websites/images/about-jolla.png)

## trestles

![](https://quarto.org/docs/websites/images/about-trestles.png)

## solana

![](https://quarto.org/docs/websites/images/about-solana.png)

## marquee

<img src="https://quarto.org/docs/websites/images/about-marquee.png" width="600px"/>

## broadside

![](https://quarto.org/docs/websites/images/about-broadside.png)
:::

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

-   Open your about page (`about.qmd`)
-   Change some of the details, add more details and choose a specific template (jolla, trestles, solana, marquee, broadside)
-   Render it!

## Listings

![](images/mockup-blog.png){.r-stretch}

## Listings

|  Type   | Description                 |
|:-------:|:----------------------------|
| default | A blog style list of items. |
|  table  | A table of listings.        |
|  grid   | A grid of listing cards.    |

## Listings

::: panel-tabset
## Default

> By default, listings will appear in full width rows that display the item's metadata (author and date), title, description, and image.

<img src="https://quarto.org/docs/websites/images/listing-default.png" height="400px"/>

## Grid

> Grid style listings display a card for each item.

<img src="https://quarto.org/docs/websites/images/listing-grid.png" height="400px"/>

## Table

> The table listing style provides a traditional tabular layout.

<img src="https://quarto.org/docs/websites/images/listing-table.png" height="400px"/>
:::

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

-   Open your existing Quarto blog from before
-   Let's change the listing type of our blog - change from default to `grid`
-   Re-render the `index.qmd`

## Listing location

``` yaml
---
title: "Listing Example"
listing:
  id: sample-listings
  contents: posts
  type: table
---

You can review the following documents for additional information:

::: {#sample-listings}
:::
```

## Populating listings

``` yaml
---
title: "Listing Example"
listing:
  contents: posts
---
```

. . .

``` yaml
title: "Listing Example"
listing:
  - id: lab-reports
    contents: "reports/*.qmd"
    type: grid
  - id: lab-notes
    contents: "lab-notes/*reports.qmd"
    type: table
```

. . .

``` markdown
Some stuff

::: {#lab-reports}
:::

Some other stuff

::: {#lab-notes}
:::
```

## Manual listings

Sometimes you might want to build out your own listing and link to arbitrary content rather than specific rendered `file.qmd`

``` yaml
---
listing:
  contents:
    - author: First Author
      title: [First Title](a-url.com)
    - author: Second Author
      title: [Second Title](a-url2.com)
---
```

. . .

``` yaml
---
listing:
  contents:
    - items.yml
---
```

``` yaml
- author: Tom Mock
  title: <a href='quarto.org'>An intro to Quarto</a>
- Author: Katie Masiello
  title: <a href='pins.rstudio.com'>Intro to pins</a>
```

## Complex Example:

<iframe src="https://colorado.rstudio.com/rsc/fake-connectwidgets/" height="800" width="1200">

</iframe>

## Complex Example, `index.qmd` YAML

``` yaml
listing: 
  - id: etl
    contents: "etl.yml"
    type: grid
    grid-columns: 2
    image-height: 100px
  - id: modeling
    contents: "modeling.yml"
    type: grid
    image-height: 100px
    grid-columns: 2
  - id: pins
    contents: "pins.yml"
    type: table
    field-display-names: 
      subtitle: "Description"
      date-modified: "Last Updated"
  - id: api
    contents: "api.yml"
    type: default
    image-align: left
    image-height: 75px
  - id: apps
    contents: "apps.yml"
    type: default
    image-align: left
    image-height: 75px
---
```

## Publishing

| Destination                                                                | Description                                                                                                                                                                                     |
|----------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [GitHub Pages](https://quarto.org/docs/publishing/github-pages.html)       | Publish content based on source code managed within a GitHub repository. Use GitHub Pages when the source code for your document or site is hosted on GitHub.                                   |
| [RStudio Connect](https://quarto.org/docs/publishing/rstudio-connect.html) | Publishing platform for secure sharing of data products within an organization. Use RStudio Connect when you want to publish content within an organization rather than on the public internet. |
| [Netlify](https://quarto.org/docs/publishing/netlify.html)                 | Professional web publishing platform. Use Netlify when you want support for custom domains, authentication, previewing branches, and other more advanced capabilities.                          |
| [Other Services](https://quarto.org/docs/publishing/other.html)            | Content rendered with Quarto uses standard formats (HTML, PDFs, MS Word, etc.) that can be published anywhere. Use this if one of the methods above don't meet your requirements.               |

## Publishing

### Static Only

-   `quarto` CLI: `quarto publish DESTINATION DOCUMENT.QMD`
-   `quarto` R package: `quarto::quarto_publish_???()`

### Code

-   Evaluate R/Python code and render on a schedule

-   RStudio Connect

-   `rsconnect::deployDoc(quarto = "path/to/quarto")`

    -   `rsconnect::deployDoc(quarto = quarto::quarto_path())`

## Static Publish

-   `quarto::quarto_publish_???()`

    -   `quarto_publish_site(server = "rstudioconnect.example.com")`
    -   `quarto_publish_doc(server = "rpubs.com")`
    -   `quarto_publish_app(server = "shinyapps.io")`

-   `quarto publish DESTINATION DOCUMENT.QMD`

    -   `quarto publish netlify document.qmd`
    -   `quarto publish gh-pages document.qmd`
    -   `quarto publish connect document.qmd`

## Netlify

<iframe src="https://www.netlify.com/" height="800" width="1200">

</iframe>

<!-- # `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"} -->

<!-- -   Go to <https://www.netlify.com/> and signup or sign-in (I like using GitHub login) -->

<!-- -   Got to: <https://app.netlify.com/drop> -->

<!-- -   Drag and drop the `_site` folder to deploy -->

<!-- -   Explore your site! -->

# `r fontawesome::fa("laptop-code", "white")` Your Turn {background-color="#447099"}

In your blog project:

``` bash
quarto publish quarto-pub
```

-   Choose a username and/or authenticate with `quartopub.com`
-   Enjoy your new blog/site!

## Websites

Similar to blog, but less of a focus on listing/posts and more focus on individual pages and overall navigation.

<iframe src="https://github.com/rstudio-conf-2022/get-started-quarto/blob/main/_quarto.yml#L8-L38" height="900px" width="1200px">

</iframe>

## Quarto Project

-   <https://quarto.org/docs/projects/quarto-projects.html>

> When you create a project, a \_quarto.yml config file is created. Here is an example of what the \_quarto.yml looks like:

``` yaml
project:
  output-dir: _output

toc: true
number-sections: true
bibliography: references.bib  
  
format: #< default format inherited by other documents
  html:
    css: styles.css
```

## More complex example

<iframe src="https://github.com/jthomasmock/themockup-blog/blob/master/_quarto.yml" height="800px" width="1200px">

</iframe>

## Quarto Projects

-   Minimal project has at least 1x file and 1x `_quarto.yml`
-   A project is a directory (and can have sub-directories)

. . .

A typical project is used to:

-   Aggregate content (website/blog/book)\
-   Share metadata (YAML config) across multiple files\
-   Render an entire directory together or redirect output to another directory\
-   Freeze computation across a project or team

## Books

``` code
project:
  type: book
book:
  title: "mybook"
  author: "Jane Doe"
  date: "8/18/2021"
  chapters:
    - index.qmd
    - intro.qmd
    - summary.qmd
    - references.qmd
bibliography: references.bib

format:
  html:
    theme: cosmo
  pdf:
    documentclass: scrreport
  epub:
    cover-image: cover.png
```

## Book structure

## Book crossferfs
